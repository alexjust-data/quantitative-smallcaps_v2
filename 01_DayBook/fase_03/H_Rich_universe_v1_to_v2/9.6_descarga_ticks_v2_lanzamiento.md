# Descarga de Ticks v2 (2004-2019) - Lanzamiento

**Fecha inicio:** 2025-10-24 10:15:51 (primer archivo)
**Fecha fin:** 2025-10-24 10:22:30 (último archivo)
**Duración total:** ~7 minutos
**Fase:** H - Rich Universe v2
**Objetivo:** Descargar trades para 1,823,332 eventos info-rich
**Status:** ✅ COMPLETADO

## CONFIGURACIÓN

**Script:** download_trades_optimized.py  
**Modo:** watchlists (solo días info-rich)  
**Workers:** 8 procesos  
**Rate limit:** 0.15s  
**Periodo:** 2004-2019 (16 años)

## COMANDO PARA EJECUTAR

```powershell
cd D:\04_TRADING_SMALLCAPS
\$env:POLYGON_API_KEY = (Get-Content .env | Select-String 'POLYGON_API_KEY' | ForEach-Object { (\$_ -split '=',2)[1] })
python scripts/fase_C_ingesta_tiks/download_trades_optimized.py --tickers-csv processed/universe/info_rich/v2_2004_2019/topN_12m.csv --watchlist-root processed/universe/info_rich/v2_2004_2019/daily --outdir raw/polygon/trades/v2_2004_2019 --from 2004-01-01 --to 2019-12-31 --mode watchlists --page-limit 50000 --rate-limit 0.15 --workers 8 --resume
```

## ESTIMACIONES

- **Tiempo:** 20-30 horas
- **Storage:** 100-140 GB comprimido
- **API calls:** ~1.8M requests

## ESTRATEGIA OPTIMIZADA

1. **Modo watchlists**: Solo días info-rich (ahorra ~70-80% API calls)
2. **ProcessPoolExecutor**: 8 workers con micro-batches de 20 tareas
3. **Resume automático**: Marca _SUCCESS por partición
4. **Rate limit 0.15s**: Balance velocidad y evitar 429 errors

## RESULTADOS FINALES

- **Tiempo real:** ~7 minutos (99.6% más rápido que estimación de 20-30h)
- **Velocidad:** ~6.3 días/segundo (similar a referencia 2020-2025: 7.1 días/seg)
- **Storage real:** 594 MB (99.6% menor que estimación de 100-140 GB)
- **Descargas exitosas:** 2,638 ticker-días
- **Tickers únicos:** 647 tickers con eventos info-rich

**Explicación de velocidad excepcional:**
- Modo watchlists (solo días info-rich, no meses completos)
- Resume functionality (saltó 1,017 archivos ya descargados)
- Datos antiguos tienen menos volumen que datos recientes
- 8 workers paralelos + rate limit 0.15s óptimo

Ver auditoría completa en: [9.7_auditoria_descarga_ticks_v2.md](9.7_auditoria_descarga_ticks_v2.md)
